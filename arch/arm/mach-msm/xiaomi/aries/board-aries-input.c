
/* Copyright (c) 2009-2010, The Linux Foundation. All rights reserved.
 * Copyright (c) 2012, LGE Inc.
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 2 and
 * only version 2 as published by the Free Software Foundation.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program; if not, write to the Free Software
 * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA
 * 02110-1301, USA.
 *
 */

#include <linux/kernel.h>
#include <linux/gpio.h>
#include <mach/board.h>
#include <linux/firmware.h>

/* keypad */
#include <linux/mfd/pm8xxx/pm8921.h>

/* i2c */
#include <linux/i2c.h>

#ifdef CONFIG_TOUCHSCREEN_ATMEL_MXT
#include <linux/i2c/atmel_mxt_ts.h>
#endif

#ifdef CONFIG_RMI4_I2C
#include <linux/rmi.h>
#endif

#include <mach/board_xiaomi.h>
#include "board-aries.h"

/* TOUCH GPIOS */
#define ATMEL_TS_I2C_INT_GPIO			6
#define ATMEL_TS_RESET_GPIO			PM8921_GPIO_PM_TO_SYS(8)
#define ATMEL_TS_IRQ_GPIO			6
#define ATMEL_TS_POWER_GPIO			PM8921_GPIO_PM_TO_SYS(5)
#define ATMEL_TS_LCD_GPIO			PM8921_GPIO_PM_TO_SYS(12)
#define RMI4_TS_POWER_GPIO			PM8921_GPIO_PM_TO_SYS(5)
#define RMI4_TS_I2C_INT_GPIO		6

/* unlock moving space is 200, the square value = 40000 */
#define ATMEL_TS_MOVE_THRESHOLD			40000

/* touch screen device */
#define APQ8064_GSBI3_QUP_I2C_BUS_ID            3

#ifdef CONFIG_TOUCHSCREEN_ATMEL_MXT
#include "firmware/mxT336SC10.h"
#include "firmware/mxT336SC20.h"
#include "firmware/mxT336SC21.h"
#define MXT336S_FIRMWARE_VER21	"mxt336s_ver21\n"
#define MXT336S_FIRMWARE_VER20	"mxt336s_ver20\n"
#define MXT336S_FIRMWARE_VER10	"mxt336s_ver10\n"
DECLARE_BUILTIN_FIRMWARE_SIZE(MXT336S_FIRMWARE_VER21, mXT336Sfw_21, sizeof(mXT336Sfw_21)-1);
DECLARE_BUILTIN_FIRMWARE_SIZE(MXT336S_FIRMWARE_VER20, mXT336Sfw_20, sizeof(mXT336Sfw_20)-1);
DECLARE_BUILTIN_FIRMWARE_SIZE(MXT336S_FIRMWARE_VER10, mXT336Sfw_10, sizeof(mXT336Sfw_10)-1);

static int mxt_init_hw(bool init)
{
	int error = 0;

	if (init) {
		error = gpio_request(ATMEL_TS_POWER_GPIO, "mxt_gpio_power");
		if (!error) {
			error = gpio_direction_output(ATMEL_TS_POWER_GPIO, 0);
			if (error) {
				gpio_free(ATMEL_TS_POWER_GPIO);
				pr_err("%s: unable to set direction gpio %d\n",
					__func__, ATMEL_TS_POWER_GPIO);
			}
		} else {
			pr_err("%s: unable to request power gpio %d\n",
				__func__, ATMEL_TS_POWER_GPIO);
		}
	} else {
		gpio_free(ATMEL_TS_POWER_GPIO);
	}

	return error;
}

static int mxt_power_on(bool on)
{
	gpio_set_value(ATMEL_TS_POWER_GPIO, on != false);
	msleep(1);
	return 0;
}

static int mxt_key_codes[MXT_KEYARRAY_MAX_KEYS] = {
	KEY_MENU, KEY_HOME, KEY_BACK,
};

static const u8 mxt336s_config_wintek_p1[] = {
	/* T6 Object */
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	/* T38 Object */
	0x00, 0x01, 0x08, 0x32, 0xF2, 0x00, 0x00, 0x00,
	/* T7 Object */
	0xFF, 0xFF, 0xFF, 0x03,
	/* T8 Object */
	0x1C, 0x00, 0x14, 0x14, 0x00, 0x00, 0x05, 0x0f, 0x14, 0xC0,
	/* T9 Object */
	0x0B, 0x00, 0x00, 0x18, 0x0D, 0x00, 0x60, 0x23, 0x02, 0x01,
	0x05, 0x08, 0x08, 0x00, 0x0A, 0x05, 0x0F, 0x00, 0xFF, 0x04,
	0xCF, 0x02, 0x00, 0x00, 0x00, 0x00, 0xBC, 0x1E, 0xF2, 0x3C,
	0x10, 0x05, 0x28, 0x2A, 0x00, 0x00,
	/* T15 Object */
	0x03, 0x15, 0x0D, 0x03, 0x01, 0x00, 0x30, 0x23, 0x02, 0x00,
	0x00,
	/* T18 Object */
	0x04, 0x00,
	/* T19 Object */
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	/* T23 Object */
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00,
	/* T25 Object */
	0x03, 0x00, 0x60, 0x6D, 0xD8, 0x59, 0x30, 0x75, 0xD8, 0x59,
	0x00, 0x00, 0x00, 0x00, 0x00,
	/* T40 Object */
	0x00, 0x00, 0x00, 0x00, 0x00,
	/* T42 Object */
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	/* T46 Object */
	0x00, 0x00, 0x10, 0x20, 0x00, 0x00, 0x03, 0x00, 0x00, 0x01,
	/* T47 Object */
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00,
	/* T55 Object */
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	/* T56 Object */
	0x03, 0x00, 0x01, 0x18, 0x05, 0x05, 0x05, 0x05, 0x05, 0x05,
	0x05, 0x05, 0x05, 0x05, 0x05, 0x05, 0x05, 0x05, 0x05, 0x05,
	0x05, 0x05, 0x05, 0x05, 0x05, 0x05, 0x05, 0x05, 0x00, 0x00,
	0x01, 0x02, 0x04, 0x04, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00,
	/* T57 Object */
	0x00, 0x00, 0x00,
	/* T61 Object 0 */
	0x00, 0x00, 0x00, 0x00, 0x00,
	/* T61 Object 1 */
	0x00, 0x00, 0x00, 0x00, 0x00,
	/* T62 Object */
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00,
};

static const u8 mxt336s_config_wintek_jdi[] = {
	/* T6 Object */
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	/* T38 Object */
	0x01, 0x01, 0x1E, 0x6E, 0xE1, 0x12, 0x00, 0x02,
	/* T7 Object */
	0xFF, 0xFF, 0xFF, 0x03,
	/* T8 Object */
	0x1C, 0x00, 0x0a, 0x0a, 0x00, 0x00, 0x05, 0x0C, 0x01, 0x80,
	/* T9 Object */
	0x0B, 0x00, 0x00, 0x18, 0x0D, 0x00, 0x60, 0x23, 0x02, 0x01,
	0x05, 0x08, 0x08, 0x00, 0x0A, 0x05, 0x0F, 0x0F, 0xFF, 0x04,
	0xCF, 0x02, 0x00, 0x00, 0x00, 0x00, 0xBC, 0x1E, 0xF2, 0x3C,
	0x10, 0x05, 0x28, 0x2A, 0x00, 0x00,
	/* T15 Object */
	0x03, 0x13, 0x0D, 0x03, 0x01, 0x00, 0x30, 0x1E, 0x02, 0x00,
	0x00,
	/* T18 Object */
	0x04, 0x00,
	/* T19 Object */
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	/* T23 Object */
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00,
	/* T25 Object */
	0x03, 0x00, 0xD4, 0x70, 0x4C, 0x5D, 0xD4, 0x70, 0x74, 0x4E,
	0x00, 0x00, 0x00, 0x00, 0x00,
	/* T40 Object */
	0x00, 0x00, 0x00, 0x00, 0x00,
	/* T42 Object */
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	/* T46 Object */
	0x00, 0x00, 0x10, 0x10, 0x00, 0x00, 0x03, 0x00, 0x00, 0x01,
	/* T47 Object */
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00,
	/* T55 Object */
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	/* T56 Object */
	0x03, 0x00, 0x01, 0x20, 0x05, 0x05, 0x05, 0x05, 0x05, 0x05,
	0x05, 0x05, 0x05, 0x05, 0x05, 0x05, 0x05, 0x05, 0x05, 0x05,
	0x05, 0x05, 0x05, 0x05, 0x05, 0x05, 0x05, 0x05, 0x02, 0x00,
	0x01, 0x02, 0x04, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00,
	/* T57 Object */
	0x00, 0x00, 0x00,
	/* T61 Object 0 */
	0x00, 0x00, 0x00, 0x00, 0x00,
	/* T61 Object 1 */
	0x00, 0x00, 0x00, 0x00, 0x00,
	/* T62 Object */
	0x01, 0x03, 0x00, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x02, 0x0D, 0x0F, 0x12, 0x05, 0x00, 0x0A, 0x05, 0x05, 0x50,
	0x12, 0x10, 0x28, 0x0F, 0x34, 0x20, 0x20, 0x04, 0x40, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x50, 0x28, 0x02, 0x08, 0x08, 0x00,
	0x0A, 0x14, 0x14, 0x05, 0x05, 0x00, 0x00, 0xE8, 0x3C, 0xF2,
	0x3C, 0x0F, 0x05, 0x00,
};

static const u8 mxt336s_config_wintek_sharp[] = {
	/* T6 Object */
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	/* T38 Object */
	0x02, 0x01, 0x1E, 0x22, 0xF2, 0x5C, 0x00, 0x01,
	/* T7 Object */
	0xFF, 0xFF, 0xFF, 0x03,
	/* T8 Object */
	0x1C, 0x00, 0x0a, 0x0a, 0x00, 0x00, 0x05, 0x0C, 0x01, 0x80,
	/* T9 Object */
	0x0B, 0x00, 0x00, 0x18, 0x0D, 0x00, 0x60, 0x23, 0x02, 0x01,
	0x05, 0x08, 0x08, 0x00, 0x0A, 0x05, 0x0F, 0x0F, 0xFF, 0x04,
	0xCF, 0x02, 0x00, 0x00, 0x00, 0x00, 0xBC, 0x1E, 0xF2, 0x3C,
	0x10, 0x05, 0x28, 0x2A, 0x00, 0x00,
	/* T15 Object */
	0x03, 0x13, 0x0D, 0x03, 0x01, 0x00, 0x30, 0x1E, 0x02, 0x00,
	0x00,
	/* T18 Object */
	0x04, 0x00,
	/* T19 Object */
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	/* T23 Object */
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00,
	/* T25 Object */
	0x03, 0x00, 0xD4, 0x70, 0x4C, 0x5D, 0xD4, 0x70, 0x74, 0x4E,
	0x00, 0x00, 0x00, 0x00, 0x00,
	/* T40 Object */
	0x00, 0x00, 0x00, 0x00, 0x00,
	/* T42 Object */
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	/* T46 Object */
	0x00, 0x00, 0x10, 0x10, 0x00, 0x00, 0x03, 0x00, 0x00, 0x01,
	/* T47 Object */
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00,
	/* T55 Object */
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	/* T56 Object */
	0x03, 0x00, 0x01, 0x20, 0x05, 0x05, 0x05, 0x05, 0x05, 0x05,
	0x05, 0x05, 0x05, 0x05, 0x05, 0x05, 0x05, 0x05, 0x05, 0x05,
	0x05, 0x05, 0x05, 0x05, 0x05, 0x05, 0x05, 0x05, 0x02, 0x00,
	0x01, 0x02, 0x04, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00,
	/* T57 Object */
	0x00, 0x00, 0x00,
	/* T61 Object 0 */
	0x00, 0x00, 0x00, 0x00, 0x00,
	/* T61 Object 1 */
	0x00, 0x00, 0x00, 0x00, 0x00,
	/* T62 Object */
	0x01, 0x03, 0x00, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x06,
	0x0C, 0x0D, 0x16, 0x1B, 0x05, 0x00, 0x0A, 0x05, 0x05, 0x50,
	0x0C, 0x16, 0x28, 0x0F, 0x34, 0x20, 0x20, 0x04, 0x40, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x50, 0x28, 0x02, 0x08, 0x08, 0x00,
	0x0A, 0x14, 0x14, 0x05, 0x05, 0x00, 0x00, 0xE8, 0x3C, 0xF2,
	0x3C, 0x0F, 0x05, 0x00,
};

static const u8 mxt336s_config_wintek_jdi_fw20[] = {
	/* T6 Object */
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	/* T38 Object */
	0x01, 0x01, 0x0F, 0x7C, 0x0B, 0xCC, 0x00, 0x02,
	/* T71 object */
	0x0F, 0x0F, 0x00, 0x00, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00,
	/* T7 Object */
	0xFF, 0xFF, 0xFF, 0x03,
	/* T8 Object */
	0x0D, 0x00, 0x0a, 0x0a, 0x00, 0x00, 0x05, 0x0C, 0x01, 0xC0,
	/* T9 Object */
	0x0B, 0x00, 0x00, 0x18, 0x0D, 0x00, 0x40, 0x23, 0x00, 0x01,
	0x05, 0x08, 0x06, 0x00, 0x0A, 0x05, 0x0F, 0x0F, 0xFF, 0x04,
	0xCF, 0x02, 0x00, 0x00, 0x00, 0x00, 0xBC, 0x1E, 0x94, 0x46,
	0x1A, 0x05, 0x28, 0x2A, 0x00, 0x02, 0x43, 0x96, 0x41, 0x64,
	0x80, 0x20, 0x23, 0x32, 0x3C, 0x78, 0x00,
	/* T14 Object */
	0x00, 0x01, 0x05, 0x05, 0x00, 0x00, 0x00, 0x00, 0x00,
	/* T15 Object */
	0x03, 0x13, 0x0D, 0x03, 0x01, 0x00, 0x20, 0x1E, 0x02, 0x00,
	0x00,
	/* T18 Object */
	0x04, 0x00,
	/* T19 Object */
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	/* T25 Object */
	0x03, 0x00, 0x90, 0x65, 0x08, 0x52, 0xE0, 0x6E, 0xA0, 0x4F,
	0x00, 0x00, 0x00, 0x00, 0x00,
	/* T42 Object */
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	/* T46 Object */
	0x08, 0x00, 0x20, 0x10, 0x00, 0x00, 0x03, 0x00, 0x00, 0x01,
	/* T47 Object */
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	/* T55 Object */
	0x01, 0x32, 0x40, 0x00, 0x00, 0x00, 0x14,
	/* T56 Object */
	0x01, 0x00, 0x01, 0x21, 0x05, 0x05, 0x05, 0x05, 0x05, 0x05,
	0x05, 0x05, 0x05, 0x05, 0x05, 0x05, 0x05, 0x05, 0x05, 0x05,
	0x05, 0x05, 0x05, 0x05, 0x05, 0x05, 0x05, 0x05, 0x02, 0x00,
	/* T61 Object 0 */
	0x00, 0x00, 0x00, 0x00, 0x00,
	/* T61 Object 1 */
	0x00, 0x00, 0x00, 0x00, 0x00,
	/* T65 Object */
	0x01, 0x06, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x01,
	/* T66 Object */
	0x00, 0x00, 0x00, 0x00, 0x00,
	/* T70 Object */
	0x01, 0x1A, 0x00, 0x09, 0x00, 0x00, 0x08, 0x00, 0x00, 0x00,
	0x01, 0x1A, 0x00, 0x09, 0x00, 0x00, 0x22, 0x01, 0x00, 0x00,
	0x01, 0x16, 0x00, 0x09, 0x00, 0x00, 0x08, 0x02, 0x00, 0x00,
	0x01, 0x16, 0x00, 0x09, 0x00, 0x00, 0x22, 0x03, 0x00, 0x00,
	0x01, 0x18, 0x00, 0x09, 0x00, 0x00, 0x08, 0x04, 0x00, 0x00,
	0x01, 0x18, 0x00, 0x09, 0x00, 0x00, 0x22, 0x05, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	/* T72 Object */
	0x01, 0x00, 0x00, 0x00, 0x00, 0x05, 0x0A, 0x05, 0x05, 0x20,
	0x0A, 0x19, 0x06, 0x05, 0x20, 0x41, 0x00, 0x40, 0x00, 0x00,
	0x0A, 0x01, 0x06, 0x0A, 0x0B, 0x0C, 0x10, 0x10, 0x10, 0x10,
	0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x00, 0x00, 0x00, 0x00,
	0x0B, 0x01, 0x06, 0x0A, 0x0B, 0x0C, 0x2A, 0x2A, 0x2A, 0x2A,
	0x2A, 0x2A, 0x2A, 0x2A, 0x2A, 0x2A, 0x00, 0x00, 0x00, 0x00,
	0x0B, 0x01, 0x06, 0x0A, 0x0B, 0x0C, 0x3F, 0x3F, 0x3F, 0x3F,
	0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x00, 0x00, 0x00, 0x00,
};

static const u8 mxt336s_config_wintek_sharp_fw20[] = {
	/* T6 Object */
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	/* T38 Object */
	0x02, 0x01, 0x0F, 0x95, 0x8B, 0x74, 0x00, 0x01,
	/* T71 object */
	0x0F, 0x0F, 0x00, 0x00, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00,
	/* T7 Object */
	0xFF, 0xFF, 0xFF, 0x03,
	/* T8 Object */
	0x0D, 0x00, 0x0a, 0x0a, 0x00, 0x00, 0x05, 0x0C, 0x01, 0xC0,
	/* T9 Object */
	0x0B, 0x00, 0x00, 0x18, 0x0D, 0x00, 0x40, 0x23, 0x00, 0x01,
	0x05, 0x08, 0x06, 0x00, 0x0A, 0x05, 0x0F, 0x0F, 0xFF, 0x04,
	0xCF, 0x02, 0x00, 0x00, 0x00, 0x00, 0xBC, 0x1E, 0x94, 0x46,
	0x1A, 0x05, 0x28, 0x2A, 0x00, 0x02, 0x43, 0x96, 0x41, 0x64,
	0x80, 0x20, 0x23, 0x32, 0x3C, 0x78, 0x00,
	/* T14 Object */
	0x00, 0x01, 0x05, 0x05, 0x00, 0x00, 0x00, 0x00, 0x00,
	/* T15 Object */
	0x03, 0x13, 0x0D, 0x03, 0x01, 0x00, 0x20, 0x1E, 0x02, 0x00,
	0x00,
	/* T18 Object */
	0x04, 0x00,
	/* T19 Object */
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	/* T25 Object */
	0x03, 0x00, 0x90, 0x65, 0x08, 0x52, 0xE0, 0x6E, 0xA0, 0x4F,
	0x00, 0x00, 0x00, 0x00, 0x00,
	/* T42 Object */
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	/* T46 Object */
	0x08, 0x00, 0x20, 0x10, 0x00, 0x00, 0x03, 0x00, 0x00, 0x01,
	/* T47 Object */
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	/* T55 Object */
	0x01, 0x32, 0x40, 0x00, 0x00, 0x00, 0x14,
	/* T56 Object */
	0x01, 0x00, 0x01, 0x21, 0x05, 0x05, 0x05, 0x05, 0x05, 0x05,
	0x05, 0x05, 0x05, 0x05, 0x05, 0x05, 0x05, 0x05, 0x05, 0x05,
	0x05, 0x05, 0x05, 0x05, 0x05, 0x05, 0x05, 0x05, 0x02, 0x00,
	/* T61 Object 0 */
	0x00, 0x00, 0x00, 0x00, 0x00,
	/* T61 Object 1 */
	0x00, 0x00, 0x00, 0x00, 0x00,
	/* T65 Object */
	0x01, 0x06, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x01,
	/* T66 Object */
	0x00, 0x00, 0x00, 0x00, 0x00,
	/* T70 Object */
	0x01, 0x1A, 0x00, 0x09, 0x00, 0x00, 0x08, 0x00, 0x00, 0x00,
	0x01, 0x1A, 0x00, 0x09, 0x00, 0x00, 0x22, 0x01, 0x00, 0x00,
	0x01, 0x16, 0x00, 0x09, 0x00, 0x00, 0x08, 0x02, 0x00, 0x00,
	0x01, 0x16, 0x00, 0x09, 0x00, 0x00, 0x22, 0x03, 0x00, 0x00,
	0x01, 0x18, 0x00, 0x09, 0x00, 0x00, 0x08, 0x04, 0x00, 0x00,
	0x01, 0x18, 0x00, 0x09, 0x00, 0x00, 0x22, 0x05, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	/* T72 Object */
	0x01, 0x00, 0x00, 0x00, 0x00, 0x05, 0x0A, 0x05, 0x05, 0x20,
	0x0A, 0x19, 0x06, 0x05, 0x20, 0x41, 0x00, 0x40, 0x00, 0x00,
	0x0A, 0x00, 0x04, 0x08, 0x0B, 0x10, 0x10, 0x10, 0x10, 0x10,
	0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x00, 0x00, 0x00, 0x00,
	0x0B, 0x00, 0x04, 0x08, 0x0B, 0x10, 0x2A, 0x2A, 0x2A, 0x2A,
	0x2A, 0x2A, 0x2A, 0x2A, 0x2A, 0x2A, 0x00, 0x00, 0x00, 0x00,
	0x0B, 0x00, 0x04, 0x08, 0x0B, 0x10, 0x3F, 0x3F, 0x3F, 0x3F,
	0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x00, 0x00, 0x00, 0x00,
};

static const u8 mxt336s_config_wintek_jdi_fw21[] = {
	/* T6 Object */
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	/* T38 Object */
	0x01, 0x01, 0x03, 0x7E, 0x49, 0xE8, 0x00, 0x02,
	/* T71 object */
	0x0F, 0x0F, 0x00, 0x00, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00,
	/* T7 Object */
	0xFF, 0xFF, 0xFF, 0x03,
	/* T8 Object */
	0x0D, 0x00, 0x0a, 0x0a, 0x00, 0x00, 0x05, 0x0C, 0x01, 0xC0,
	/* T9 Object */
	0x0B, 0x00, 0x00, 0x18, 0x0D, 0x00, 0x40, 0x23, 0x00, 0x01,
	0x05, 0x08, 0x06, 0x00, 0x0A, 0x05, 0x0F, 0x0F, 0xFF, 0x04,
	0xCF, 0x02, 0x00, 0x00, 0x00, 0x00, 0xBC, 0x1E, 0x94, 0x46,
	0x1A, 0x05, 0x28, 0x2A, 0x00, 0x02, 0x43, 0xF8, 0x41, 0x64,
	0x80, 0x20, 0x23, 0x32, 0x3C, 0x78, 0x00,
	/* T14 Object */
	0x00, 0x01, 0x05, 0x05, 0x00, 0x00, 0x00, 0x00, 0x00,
	/* T15 Object */
	0x03, 0x13, 0x0D, 0x03, 0x01, 0x00, 0x20, 0x1E, 0x02, 0x00,
	0x00,
	/* T18 Object */
	0x04, 0x00,
	/* T19 Object */
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	/* T25 Object */
	0x03, 0x00, 0x90, 0x65, 0x08, 0x52, 0xE0, 0x6E, 0xA0, 0x4F,
	0x00, 0x00, 0x00, 0x00, 0x00,
	/* T42 Object */
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	/* T46 Object */
	0x08, 0x00, 0x20, 0x10, 0x00, 0x00, 0x03, 0x00, 0x00, 0x01,
	/* T47 Object */
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	/* T55 Object */
	0x01, 0x32, 0x40, 0x00, 0x00, 0x00, 0x14,
	/* T56 Object */
	0x01, 0x00, 0x01, 0x21, 0x05, 0x05, 0x05, 0x05, 0x05, 0x05,
	0x05, 0x05, 0x05, 0x05, 0x05, 0x05, 0x05, 0x05, 0x05, 0x05,
	0x05, 0x05, 0x05, 0x05, 0x05, 0x05, 0x05, 0x05, 0x02, 0x00,
	/* T61 Object 0 */
	0x00, 0x00, 0x00, 0x00, 0x00,
	/* T61 Object 1 */
	0x00, 0x00, 0x00, 0x00, 0x00,
	/* T65 Object */
	0x01, 0x06, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x01,
	/* T66 Object */
	0x00, 0x00, 0x00, 0x00, 0x00,
	/* T70 Object */
	0x01, 0x1A, 0x00, 0x09, 0x00, 0x00, 0x08, 0x00, 0x00, 0x00,
	0x01, 0x1A, 0x00, 0x09, 0x00, 0x00, 0x22, 0x01, 0x00, 0x00,
	0x01, 0x16, 0x00, 0x09, 0x00, 0x00, 0x08, 0x02, 0x00, 0x00,
	0x01, 0x16, 0x00, 0x09, 0x00, 0x00, 0x22, 0x03, 0x00, 0x00,
	0x01, 0x18, 0x00, 0x09, 0x00, 0x00, 0x08, 0x04, 0x00, 0x00,
	0x01, 0x18, 0x00, 0x09, 0x00, 0x00, 0x22, 0x05, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	/* T72 Object */
	0x01, 0x00, 0x00, 0x00, 0x00, 0x05, 0x0A, 0x05, 0x05, 0x20,
	0x0A, 0x19, 0x06, 0x05, 0x20, 0x41, 0x00, 0x40, 0x00, 0x00,
	0x0A, 0x01, 0x06, 0x0A, 0x0B, 0x0C, 0x10, 0x10, 0x10, 0x10,
	0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x00, 0x00, 0x00, 0x00,
	0x0B, 0x01, 0x06, 0x0A, 0x0B, 0x0C, 0x2A, 0x2A, 0x2A, 0x2A,
	0x2A, 0x2A, 0x2A, 0x2A, 0x2A, 0x2A, 0x00, 0x00, 0x00, 0x00,
	0x0B, 0x01, 0x06, 0x0A, 0x0B, 0x0C, 0x3F, 0x3F, 0x3F, 0x3F,
	0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x00, 0x00, 0x00, 0x00,
};

static const u8 mxt336s_config_wintek_sharp_fw21[] = {
	/* T6 Object */
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	/* T38 Object */
	0x02, 0x01, 0x03, 0x97, 0xC9, 0x50, 0x00, 0x01,
	/* T71 object */
	0x0F, 0x0F, 0x00, 0x00, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00,
	/* T7 Object */
	0xFF, 0xFF, 0xFF, 0x03,
	/* T8 Object */
	0x0D, 0x00, 0x0a, 0x0a, 0x00, 0x00, 0x05, 0x0C, 0x01, 0xC0,
	/* T9 Object */
	0x0B, 0x00, 0x00, 0x18, 0x0D, 0x00, 0x40, 0x23, 0x00, 0x01,
	0x05, 0x08, 0x06, 0x00, 0x0A, 0x05, 0x0F, 0x0F, 0xFF, 0x04,
	0xCF, 0x02, 0x00, 0x00, 0x00, 0x00, 0xBC, 0x1E, 0x94, 0x46,
	0x1A, 0x05, 0x28, 0x2A, 0x00, 0x02, 0x43, 0xF8, 0x41, 0x64,
	0x80, 0x20, 0x23, 0x32, 0x3C, 0x78, 0x00,
	/* T14 Object */
	0x00, 0x01, 0x05, 0x05, 0x00, 0x00, 0x00, 0x00, 0x00,
	/* T15 Object */
	0x03, 0x13, 0x0D, 0x03, 0x01, 0x00, 0x20, 0x1E, 0x02, 0x00,
	0x00,
	/* T18 Object */
	0x04, 0x00,
	/* T19 Object */
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	/* T25 Object */
	0x03, 0x00, 0x90, 0x65, 0x08, 0x52, 0xE0, 0x6E, 0xA0, 0x4F,
	0x00, 0x00, 0x00, 0x00, 0x00,
	/* T42 Object */
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	/* T46 Object */
	0x08, 0x00, 0x20, 0x10, 0x00, 0x00, 0x03, 0x00, 0x00, 0x01,
	/* T47 Object */
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	/* T55 Object */
	0x01, 0x32, 0x40, 0x00, 0x00, 0x00, 0x14,
	/* T56 Object */
	0x01, 0x00, 0x01, 0x21, 0x05, 0x05, 0x05, 0x05, 0x05, 0x05,
	0x05, 0x05, 0x05, 0x05, 0x05, 0x05, 0x05, 0x05, 0x05, 0x05,
	0x05, 0x05, 0x05, 0x05, 0x05, 0x05, 0x05, 0x05, 0x02, 0x00,
	/* T61 Object 0 */
	0x00, 0x00, 0x00, 0x00, 0x00,
	/* T61 Object 1 */
	0x00, 0x00, 0x00, 0x00, 0x00,
	/* T65 Object */
	0x01, 0x06, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x01,
	/* T66 Object */
	0x00, 0x00, 0x00, 0x00, 0x00,
	/* T70 Object */
	0x01, 0x1A, 0x00, 0x09, 0x00, 0x00, 0x08, 0x00, 0x00, 0x00,
	0x01, 0x1A, 0x00, 0x09, 0x00, 0x00, 0x22, 0x01, 0x00, 0x00,
	0x01, 0x16, 0x00, 0x09, 0x00, 0x00, 0x08, 0x02, 0x00, 0x00,
	0x01, 0x16, 0x00, 0x09, 0x00, 0x00, 0x22, 0x03, 0x00, 0x00,
	0x01, 0x18, 0x00, 0x09, 0x00, 0x00, 0x08, 0x04, 0x00, 0x00,
	0x01, 0x18, 0x00, 0x09, 0x00, 0x00, 0x22, 0x05, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	/* T72 Object */
	0x01, 0x00, 0x00, 0x00, 0x00, 0x05, 0x0A, 0x05, 0x05, 0x20,
	0x0A, 0x19, 0x06, 0x05, 0x20, 0x41, 0x00, 0x40, 0x00, 0x00,
	0x0A, 0x00, 0x04, 0x08, 0x0B, 0x10, 0x10, 0x10, 0x10, 0x10,
	0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x00, 0x00, 0x00, 0x00,
	0x0B, 0x00, 0x04, 0x08, 0x0B, 0x10, 0x2A, 0x2A, 0x2A, 0x2A,
	0x2A, 0x2A, 0x2A, 0x2A, 0x2A, 0x2A, 0x00, 0x00, 0x00, 0x00,
	0x0B, 0x00, 0x04, 0x08, 0x0B, 0x10, 0x3F, 0x3F, 0x3F, 0x3F,
	0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x00, 0x00, 0x00, 0x00,
};

static const struct mxt_config_info mxt336s_config_array[] = {
	{
		.config		= mxt336s_config_wintek_jdi,
		.config_length	= ARRAY_SIZE(mxt336s_config_wintek_jdi),
		.family_id	= 0x82,
		.variant_id	= 0x19,
		.version	= 0x10,
		.build		= 0xAA,
		.bootldr_id	= MXT_BOOTLOADER_ID_336S,
		.fw_name	= MXT336S_FIRMWARE_VER21,
		.key_gain	= 0x00,
	},
	{
		.config		= mxt336s_config_wintek_sharp,
		.config_length	= ARRAY_SIZE(mxt336s_config_wintek_sharp),
		.family_id	= 0x82,
		.variant_id	= 0x19,
		.version	= 0x10,
		.build		= 0xAA,
		.bootldr_id	= MXT_BOOTLOADER_ID_336S,
		.fw_name	= MXT336S_FIRMWARE_VER21,
		.key_gain	= 0x00,
	},
	{	.config		= mxt336s_config_wintek_jdi_fw20,
		.config_length	= ARRAY_SIZE(mxt336s_config_wintek_jdi_fw20),
		.family_id	= 0x82,
		.variant_id	= 0x19,
		.version	= 0x10,
		.build		= 0x01,
		.bootldr_id	= MXT_BOOTLOADER_ID_336S,
		.fw_name	= MXT336S_FIRMWARE_VER21,
		.key_gain	= 0x10,
		.key_threshold	= 0x12,
	},
	{
		.config		= mxt336s_config_wintek_sharp_fw20,
		.config_length	= ARRAY_SIZE(mxt336s_config_wintek_sharp_fw20),
		.family_id	= 0x82,
		.variant_id	= 0x19,
		.version	= 0x10,
		.build		= 0x01,
		.bootldr_id	= MXT_BOOTLOADER_ID_336S,
		.fw_name	= MXT336S_FIRMWARE_VER21,
		.key_gain	= 0x10,
		.key_threshold	= 0x12,
	},
	{	.config		= mxt336s_config_wintek_jdi_fw21,
		.config_length	= ARRAY_SIZE(mxt336s_config_wintek_jdi_fw21),
		.family_id	= 0x82,
		.variant_id	= 0x29,
		.version	= 0x11,
		.build		= 0x01,
		.bootldr_id	= MXT_BOOTLOADER_ID_336S,
		.fw_name	= MXT336S_FIRMWARE_VER21,
		.key_gain	= 0x10,
		.key_threshold	= 0x12,
	},
	{
		.config		= mxt336s_config_wintek_sharp_fw21,
		.config_length	= ARRAY_SIZE(mxt336s_config_wintek_sharp_fw21),
		.family_id	= 0x82,
		.variant_id	= 0x29,
		.version	= 0x11,
		.build		= 0x01,
		.bootldr_id	= MXT_BOOTLOADER_ID_336S,
		.fw_name	= MXT336S_FIRMWARE_VER21,
		.key_gain	= 0x10,
		.key_threshold	= 0x12,
	},
};

static struct mxt_platform_data mxt336s_platform_data = {
	.config_array		= mxt336s_config_array,
	.config_array_size	= ARRAY_SIZE(mxt336s_config_array),
	.panel_minx		= 0,
	.panel_maxx		= 719,
	.panel_miny		= 0,
	.panel_maxy		= 1279,
	.disp_minx		= 0,
	.disp_maxx		= 719,
	.disp_miny		= 0,
	.disp_maxy		= 1279,
	.irqflags		= IRQF_TRIGGER_LOW | IRQF_ONESHOT,
	.i2c_pull_up		= false,
	.digital_pwr_regulator	= false,
	.reset_gpio		= ATMEL_TS_RESET_GPIO,
	.irq_gpio		= ATMEL_TS_I2C_INT_GPIO,
	.lcd_gpio		= ATMEL_TS_LCD_GPIO,
	.key_codes		= mxt_key_codes,
	.move_threshold		= ATMEL_TS_MOVE_THRESHOLD,
	.read_chg		= NULL,
	.init_hw		= mxt_init_hw,
	.power_on		= mxt_power_on,
	.max_ref		= 30000,
};
#endif

#ifdef CONFIG_RMI4_I2C
static int rmi_power_on(bool on)
{
	gpio_set_value(RMI4_TS_POWER_GPIO, on != false);
	msleep(100);
	return 0;
}

static int rmi_gpio_config(void *gpio_data, bool configure)
{
	int error = 0;

	if (configure) {
		error = gpio_request(RMI4_TS_POWER_GPIO, "rmi4_gpio_power");
		if (!error) {
			error = gpio_direction_output(RMI4_TS_POWER_GPIO, 0);
			if (error) {
				gpio_free(RMI4_TS_POWER_GPIO);
				pr_err("%s: unable to set direction gpio %d\n",
				__func__, RMI4_TS_POWER_GPIO);
				return error;
			}
		} else {
			pr_err("%s: unable to request power gpio %d\n",
			__func__, RMI4_TS_POWER_GPIO);
			return error;
		}
		error = gpio_request(RMI4_TS_I2C_INT_GPIO, "rmi_intr");
		if (error < 0) {
			pr_err("%s: gpio_request fail", __func__);
			return error;
		}

		error = gpio_direction_input(RMI4_TS_I2C_INT_GPIO);
		if (error < 0) {
			pr_err("%s: gpio_direction_input fail", __func__);
			gpio_free(RMI4_TS_I2C_INT_GPIO);
			return error;
		}

		rmi_power_on(true);
	} else {
		rmi_power_on(false);
		gpio_free(RMI4_TS_I2C_INT_GPIO);
		gpio_free(RMI4_TS_POWER_GPIO);
	}

	return error;
}

/* add built-in firmware to the kernel */
#include "firmware/rmi_firmware_tpk_ito_aries_p1.h"
#include "firmware/rmi_firmware_tpk_ito_aries_p2.h"
#include "firmware/rmi_firmware_biel_ito_aries.h"
#include "firmware/rmi_firmware_laibao_ito_aries.h"
#include "firmware/rmi_factory_test_data_tpk_aries_p1.h"
#include "firmware/rmi_factory_test_data_tpk_aries_p2.h"
#include "firmware/rmi_factory_test_data_biel_aries.h"
#include "firmware/rmi_factory_test_data_laibao_aries.h"
#define TPK_FIRMWARE_P1_NAME	"rmi4/s3202_ver5.img"
#define TPK_FIRMWARE_P2_NAME	"rmi4/S3202_ver5.img"
#define BIEL_FIRMWARE_NAME	"rmi4/BM001.img"
#define LAIBAO_FIRMWARE_NAME	"rmi4/Trs_lb00.img"
DECLARE_BUILTIN_FIRMWARE(TPK_FIRMWARE_P1_NAME, rmi_firmware_tpk_ito_p1);
DECLARE_BUILTIN_FIRMWARE(TPK_FIRMWARE_P2_NAME, rmi_firmware_tpk_ito_p2);
DECLARE_BUILTIN_FIRMWARE(BIEL_FIRMWARE_NAME, rmi_firmware_biel_ito);
DECLARE_BUILTIN_FIRMWARE(LAIBAO_FIRMWARE_NAME, rmi_firmware_laibao_ito);

static unsigned char rmi_key_map[] = {KEY_MENU, KEY_HOME, KEY_BACK};

static struct rmi_button_map rmi_button_map_s3202 = {
	.nbuttons		= 3,
	.map			= rmi_key_map,
};

static struct rmi_f54_self_test_data rmi_self_test_data_tpk_p1[] = {
	{min_max_tpk_p1, sizeof(min_max_tpk_p1)},
	{full_raw_capacitance_tpk_p1, sizeof(full_raw_capacitance_tpk_p1)},
	{high_resistance_tpk_p1, sizeof(high_resistance_tpk_p1)},
};

static struct rmi_f54_self_test_data rmi_self_test_data_tpk_p2[] = {
	{min_max_tpk_p2, sizeof(min_max_tpk_p2)},
	{full_raw_capacitance_tpk_p2, sizeof(full_raw_capacitance_tpk_p2)},
	{high_resistance_tpk_p2, sizeof(high_resistance_tpk_p2)},
};

static struct rmi_f54_self_test_data rmi_self_test_data_biel[] = {
	{min_max_biel, sizeof(min_max_biel)},
	{full_raw_capacitance_biel, sizeof(full_raw_capacitance_biel)},
	{high_resistance_biel, sizeof(high_resistance_biel)},
};

static struct rmi_f54_self_test_data rmi_self_test_data_laibao[] = {
	{min_max_laibao, sizeof(min_max_laibao)},
	{full_raw_capacitance_laibao, sizeof(full_raw_capacitance_laibao)},
	{high_resistance_laibao, sizeof(high_resistance_laibao)},
};

static struct rmi_config_info rmi_config_info_array[] = {
	{
		.product_name = "s3202_ver5",
		.self_test_data = rmi_self_test_data_tpk_p1,
	},
	{
		.product_name = "S3202_ver5",
		.self_test_data = rmi_self_test_data_tpk_p2,
	},
	{
		.product_name = "BM001",
		.self_test_data = rmi_self_test_data_biel,
	},
	{
		.product_name = "Trs_lb00",
		.self_test_data = rmi_self_test_data_laibao,
	},
};

static struct rmi_device_platform_data rmi_data = {
	.driver_name		= "rmi_generic",
	.sensor_name		= "s3202",
	.attn_gpio		= RMI4_TS_I2C_INT_GPIO,
	.attn_polarity		= RMI_ATTN_ACTIVE_LOW,
	.level_triggered	= true,
	.gpio_config		= rmi_gpio_config,
	.axis_align		= {
		.flip_x			= 1,
		.flip_y			= 1,
		.staying_threshold	= 12,
		.landing_threshold	= 24,
		.landing_jiffies	= HZ/8,
	},
		.f11_type_b		= true,
		.reset_delay_ms		= 65,
		.power_management	= {
		.nosleep		= RMI_F01_NOSLEEP_ON,
	},
	.f1a_button_map		= &rmi_button_map_s3202,
	.config_info_array		= rmi_config_info_array,
	.config_array_size		= sizeof(rmi_config_info_array),
};
#endif

static struct i2c_board_info touch_device_info[] = {
#ifdef CONFIG_TOUCHSCREEN_ATMEL_MXT
	{
		I2C_BOARD_INFO("atmel_mxt_ts", 0x4b),
		.platform_data = &mxt336s_platform_data,
		.irq = MSM_GPIO_TO_INT(ATMEL_TS_I2C_INT_GPIO),
	},
#endif
#ifdef CONFIG_RMI4_I2C
	{
		I2C_BOARD_INFO("rmi_i2c", 0x22),
		.platform_data = &rmi_data,
	},
	{
		I2C_BOARD_INFO("rmi_i2c", 0x20),
		.platform_data = &rmi_data,
	},
	{
		I2C_BOARD_INFO("rmi_i2c", 0x70),
		.platform_data = &rmi_data,
	},
#endif
};

static struct i2c_registry touch_devices __initdata = {
	I2C_FFA,
	APQ8064_GSBI3_QUP_I2C_BUS_ID,
	touch_device_info,
	ARRAY_SIZE(touch_device_info),
};

void __init apq8064_init_input(void)
{
	printk(KERN_INFO "[Touch D] %s: NOT DCM KDDI, reg touchscreen driver \n",
	       __func__);

	i2c_register_board_info(touch_devices.bus,
				touch_devices.info,
				touch_devices.len);
}
